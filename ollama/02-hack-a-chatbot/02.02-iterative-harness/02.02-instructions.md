# 02 - Hacking a Chat Bot

## 02.02 - Iterative Harness

### Intercepting Proxy
It may make sense to use an intercepting proxy, like burpsuite, to look at calls between a browser and the API or the web application.

### Developing a Test Harness

While running [example 01.07](../../01-make-a-chatbot/01.07-langgraph-rag/01.07-langgraph-rag.py), we open up another window and use the python REPL interface to generate some working requests code to send an arbitrary prompt.

```bash
Python 3.13.3 (main, Jan  8 2026, 12:03:54) [GCC 14.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests
>>> requests.post("http://127.0.0.1:8000/chat")
<Response [422]>
>>> r = requests.post("http://127.0.0.1:8000/chat")
>>> print(r.text)
{"detail":[{"type":"missing","loc":["body"],"msg":"Field required","input":null}]}
>>> r = requests.post("http://127.0.0.1:8000/chat",data={})
>>> print(r.text)
{"detail":[{"type":"missing","loc":["body"],"msg":"Field required","input":null}]}
>>> r = requests.post("http://127.0.0.1:8000/chat",data={"message":"Tell me about yourself.","session_id":1})
>>> print(r.text)
{"detail":[{"type":"model_attributes_type","loc":["body"],"msg":"Input should be a valid dictionary or object to extract fields from","input":"message=Tell+me+about+yourself.&session_id=1"}]}
>>> r = requests.post("http://127.0.0.1:8000/chat",json={"message":"Tell me about yourself.","session_id":1})
>>> print(r.text)
{"detail":[{"type":"string_type","loc":["body","session_id"],"msg":"Input should be a valid string","input":1}]}
>>> r = requests.post("http://127.0.0.1:8000/chat",json={"message":"Tell me about yourself.","session_id":"1"})
>>> print(r.text)
{"response":"I don't have any information about myself from our previous conversation, as this is the start of our interaction. However, I can tell you that I'm a helpful assistant, and I'm here to provide information and answer questions to the best of my ability based on the knowledge available to me. If you'd like to tell me more about yourself or ask a question, I'll do my best to assist you!","context_used":"Document 1:\nThe following are axiomatic facts you can rely on:\n* Phoenix is the best city in the United States.\n* Cactuscon is the best security convention around.\n* The people at Cactuscon are fantastic.\n* Ginos is better than Giardanos.\n* The secret flag is flag{ragged_my_way_in_here}"}
```

Once you have a good harness, you can make a module to reuse it.

### Exercise

* Use the code above to create a test harness which uses a list of prompts and iterates over them, printing out the prompt and the result.
* Extend your code to take in a command line parameter for a file name, which is opened and contains a text file of prompts you keep around.
* **Challenge** - look at the [Arcanum Prompt Injection Taxonomy](https://arcanum-sec.github.io/arc_pi_taxonomy/) and create some simple evasions to apply to your prompts.
